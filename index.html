
<!DOCTYPE html>
<html lang="pt-br" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="estilo.css">
    <title>Comanda de Pedidos</title>
  </head>
  <body>
    <div id="interface">
      <h1>Comanda de Pedidos</h1>

      <table>
        <tr class="relatorio">
          <th>Pedido</th>
          <th>Preço</th>
          <th>Quantidade</th>
        </tr>
        
        <tr>
          <td class="subtitulo porcoes" colspan="3" ><b>Porções</b></td>
        </tr>

        <tr class="item porcoes">
          <td>Batata frita</td>
          <td>R$ 20,20</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item porcoes">
          <td>Mandioquinha frita</td>
          <td>R$ 20,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item porcoes">
          <td>Porção de pastéis</td>
          <td>R$ 20,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item porcoes">
          <td>Porção de Calabresa</td>
          <td>R$ 20,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item porcoes">
          <td>Filé de Tilápia</td>
          <td>R$ 25,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item porcoes">
          <td>Bolinho de bacalhau</td>
          <td>R$ 25,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item porcoes">
          <td>Frango a Passarinho</td>
          <td>R$ 24,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item porcoes">
          <td>Costelinha de porco</td>
          <td>R$ 24,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>



        <tr>
          <td class="subtitulo espetinhocom" colspan="3" ><b>Espetinhos Completos</b></td>
        </tr>
        <tr class="item espetinhocom">
          <td>Picanha</td>
          <td>R$ 25,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item espetinhocom">
          <td>Contra filé</td>
          <td>R$ 23,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item espetinhocom">
          <td>Filé com bacon</td>
          <td>R$ 23,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item espetinhocom">
          <td>Cupim</td>
          <td>R$ 18,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item espetinhocom">
          <td>Káfta</td>
          <td>R$ 16,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item espetinhocom">
          <td>Frango com bacon</td>
          <td>R$ 16,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item espetinhocom">
          <td>Queijo</td>
          <td>R$ 16,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>


        <tr>
          <td class="subtitulo espetinhosim" colspan="3" ><b>Espetinhos Simples</b></td>
        </tr>
        <tr class="item espetinhosim">
          <td>Picanha</td>
          <td>R$ 9,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item espetinhosim">
          <td>Contra filé</td>
          <td>R$ 7,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item espetinhosim">
          <td>Filé com bacon</td>
          <td>R$ 8,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item espetinhosim">
          <td>Cupim</td>
          <td>R$ 6,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item espetinhosim">
          <td>Káfta</td>
          <td>R$ 5,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item espetinhosim">
          <td>Frango com bacon</td>
          <td>R$ 6,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item espetinhosim">
          <td>Queijo</td>
          <td>R$ 6,00</td>
          <td><input type="number"min="0" value="0"></td>
        </tr>


        <tr>
          <td class="subtitulo bebidas" colspan="3" ><b>Bebidas</b></td>
        </tr>
        <tr class="item bebidas">
          <td>Chopp Brahma</td>
          <td>R$ 12,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item bebidas">
          <td>Cerveja lata</td>
          <td>R$ 5,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item bebidas">
          <td>Cerveja Longneck</td>
          <td>R$ 8,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item bebidas">
          <td>Cerveja 600</td>
          <td>R$ 12,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item bebidas">
          <td>Refrigerante lata</td>
          <td>R$ 6,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item bebidas">
          <td>Refrigerante 600</td>
          <td>R$ 6,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item bebidas">
          <td>Refrigerante 1L</td>
          <td>R$ 8,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item bebidas">
          <td>Refrigerante 2L</td>
          <td>R$ 12,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item bebidas">
          <td>Suco copo</td>
          <td>R$ 8,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr class="item bebidas">
          <td>Suco jarra</td>
          <td>R$ 12,00</td>
          <td><input type="number" min="0" value="0"></td>
        </tr>
        <tr id="total">
          <td colspan="4">Clique no botão para finalizar o pedido!</td>
        </tr>
      </table>
      <button id="botao" type="button" name="button" onclick="main()">Finalizar Pedido</button>
      <input type="button" value="voltar" onclick=" history.go()">
    </div>
    <script type="text/javascript">
      function main(){
  var valortotal = 0, count = 0, temitem = 0;
  item = document.getElementsByClassName('item');
  qtditens = item.length;
  for(var i=0; i<qtditens;i++){
      if(item[i].children[2].lastChild.value != 0){
        temitem = 1;
      }
  }
  if(temitem == 1){
    for(var i=0; i<qtditens;i++){
      if(item[count].children[2].lastChild.value==0){
        item[count].remove();
      }else{
        valoritem = parseFloat(item[count].children[2].lastChild.value,10) * tratarmoeda(item[count].children[1].innerHTML);
        valortotal = valortotal + valoritem;
        addchild("td","R$ "+valoritem.toFixed(2).toString().replace('.',','),item[count])
        item[count].children[2].innerHTML = item[count].children[2].lastChild.value; //pega o valor do input e coloca ele direto td
        count++;
      }
    }
    gerainterfacecomanda(valortotal);
  }else{
    alert("Deve ser selecionado ao menos um pediso!");
    temitem = 0;
  }
}

function tratarmoeda(num){
  var moeda = num;
  moeda = parseFloat(moeda.slice(3,10).replace(',','.'));
  return moeda;
}

function addchild(element, texto, pai){
  var elemento = document.createElement(element);
  var texto = document.createTextNode(texto);
  elemento.appendChild(texto);
  pai.appendChild(elemento);
}

function gerainterfacecomanda(valor){
  subtitulo = document.getElementsByClassName('subtitulo');
  relatorio = document.getElementsByClassName('relatorio');
  porcoes = document.getElementsByClassName('porcoes');
  espetinhocom = document.getElementsByClassName('espetinhocom');
  espetinhosim = document.getElementsByClassName('espetinhosim');
  bebidas = document.getElementsByClassName('bebidas');
  botao = document.getElementById('botao');
  total = document.getElementById('total');
  total.children[0].innerHTML = "Valor Total: R$ "+valor.toFixed(2).toString().replace('.',',');
  relatorio[0].children[1].innerHTML = "Valor Unitário";
  addchild("th","Valor Item",relatorio[0]);
  for(var i=0;i<subtitulo.length;i++){
      subtitulo[i].getAttributeNode("colspan").value = 4;
  }
  if(porcoes.length == 1){porcoes[0].remove();}
  if(espetinhocom.length == 1){espetinhocom[0].remove();}
  if(espetinhosim.length == 1){espetinhosim[0].remove();}
  if(bebidas.length == 1){bebidas[0].remove();}
  botao.remove();
}
    </script>
    
     </body>

</html>
